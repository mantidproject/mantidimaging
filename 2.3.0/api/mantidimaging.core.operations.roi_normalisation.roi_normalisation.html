<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  
    <title>mantidimaging.core.operations.roi_normalisation.roi_normalisation module - MantidImaging 2.3.0 Documentation</title>
  
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=514cf933" />
    <link rel="stylesheet" type="text/css" href="../_static/extra.css?v=c0834052" />
    
    <script src="../_static/documentation_options.js?v=c3c8ae58"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="mantidimaging.core.operations.rotate_stack package" href="mantidimaging.core.operations.rotate_stack.html" />
    <link rel="prev" title="mantidimaging.core.operations.roi_normalisation package" href="mantidimaging.core.operations.roi_normalisation.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mantidimaging.core.operations.rotate_stack.html" title="mantidimaging.core.operations.rotate_stack package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mantidimaging.core.operations.roi_normalisation.html" title="mantidimaging.core.operations.roi_normalisation package"
             accesskey="P">previous</a> |</li>
  
        <li class="nav-item nav-item-0"><a href="../index.html">MantidImaging 2.3.0 Documentation</a> &#187;</li>
  
          <li class="nav-item nav-item-1"><a href="../api.html" >API Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="mantidimaging.html" >mantidimaging package</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="mantidimaging.core.html" >mantidimaging.core package</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="mantidimaging.core.operations.html" >mantidimaging.core.operations package</a> &#187;</li>
          <li class="nav-item nav-item-5"><a href="mantidimaging.core.operations.roi_normalisation.html" accesskey="U">mantidimaging.core.operations.roi_normalisation package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">mantidimaging.core.operations.roi_normalisation.roi_normalisation module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-mantidimaging.core.operations.roi_normalisation.roi_normalisation">
<span id="mantidimaging-core-operations-roi-normalisation-roi-normalisation-module"></span><h1>mantidimaging.core.operations.roi_normalisation.roi_normalisation module<a class="headerlink" href="#module-mantidimaging.core.operations.roi_normalisation.roi_normalisation" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mantidimaging.core.operations.roi_normalisation.roi_normalisation.</span></span><span class="sig-name descname"><span class="pre">RoiNormalisationFilter</span></span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="mantidimaging.core.operations.base_filter.html#mantidimaging.core.operations.base_filter.BaseFilter" title="mantidimaging.core.operations.base_filter.BaseFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseFilter</span></code></a></p>
<p>Normalises the image data by using the average value in a no-sample (air) region of interest (ROI) of the
image. This scaling operation allows to account for beam fluctuations and different exposure times of
projections.</p>
<p>Intended to be used on: Projections</p>
<p>When: Always, to ensure that any fluctuations in beam intensity are normalised.</p>
<p>Note: Beam fluctuations are visible by horizontal lines in the sinograms, as  some projections are
brighter/darker than the neighbours. This can be fixed with this operation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.execute_wrapper">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flat_field</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter.execute_wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.execute_wrapper" title="Link to this definition">¶</a></dt>
<dd><p>Should construct a partial call to _filter_func using values taken from the widgets passed to this function
as kwargs.
:param kwargs: widgets which contain values required for _filter_func.
:return: a partial call to _filter_func using parameters taken from the input widgets.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_func">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">filter_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mantidimaging.core.data.images.html#mantidimaging.core.data.images.Images" title="mantidimaging.core.data.images.Images"><span class="pre">Images</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_of_interest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mantidimaging.core.utility.sensible_roi.html#mantidimaging.core.utility.sensible_roi.SensibleROI" title="mantidimaging.core.utility.sensible_roi.SensibleROI"><span class="pre">SensibleROI</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalisation_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Stack</span> <span class="pre">Average'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flat_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="mantidimaging.core.data.images.html#mantidimaging.core.data.images.Images" title="mantidimaging.core.data.images.Images"><span class="pre">Images</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter.filter_func"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_func" title="Link to this definition">¶</a></dt>
<dd><p>Normalise by beam intensity.</p>
<p>This does NOT do any checks if the Air Region is out of bounds!
If the Air Region is out of bounds, the crop will fail at runtime.
If the Air Region is in bounds, but has overlapping coordinates
the crop give back a 0 shape of the coordinates that were wrong.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> – Sample data which is to be processed. Expected in radiograms</p></li>
<li><p><strong>region_of_interest</strong> – The order is - Left Top Right Bottom. The air</p></li>
</ul>
</dd>
</dl>
<p>region for which grey values are summed up and used for normalisation/scaling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>normalisation_mode</strong> – <p>Controls what the ROI counts are normalised to.
‘Preserve Max’ : Normalisation is scaled such that the maximum pixel value of the stack is equal before</p>
<blockquote>
<div><p>and after the operation.</p>
</div></blockquote>
<p>’Stack Average’ : The mean value of the air region across all projections is preserved.
‘Flat Field’ : The mean value of the air regions in the projections is made equal to the mean value of the</p>
<blockquote>
<div><p>air region in the flat field image.</p>
</div></blockquote>
</p></li>
<li><p><strong>flat_field</strong> – Flat field to use if ‘Flat Field’ mode is enabled.</p></li>
<li><p><strong>cores</strong> – The number of cores that will be used to process the data.</p></li>
<li><p><strong>chunksize</strong> – The number of chunks that each worker will receive.</p></li>
<li><p><strong>progress</strong> – Reference to a progress bar object</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Filtered data (stack of images)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_name">
<span class="sig-name descname"><span class="pre">filter_name</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'ROI</span> <span class="pre">Normalisation'</span></em><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.group_name">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">group_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mantidimaging.core.operations.base_filter.html#mantidimaging.core.operations.base_filter.FilterGroup" title="mantidimaging.core.operations.base_filter.FilterGroup"><span class="pre">FilterGroup</span></a></span></span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter.group_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.group_name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.link_histograms">
<span class="sig-name descname"><span class="pre">link_histograms</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.link_histograms" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.register_gui">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register_gui</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">form</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_change</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">view</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#RoiNormalisationFilter.register_gui"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.register_gui" title="Link to this definition">¶</a></dt>
<dd><p>Adds any required input widgets to the given form and returns references to them.</p>
<p>The return values should be in a dict which can be unpacked as kwargs for a call to
the operations <cite>execute_wrapper</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>view</strong> – </p></li>
<li><p><strong>form</strong> – the layout to create input widgets in</p></li>
<li><p><strong>on_change</strong> – the filter view action to be bound to all created inputs</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the widgets bound as kwargs which are needed to call execute_wrapper</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.enable_correct_fields_only">
<span class="sig-prename descclassname"><span class="pre">mantidimaging.core.operations.roi_normalisation.roi_normalisation.</span></span><span class="sig-name descname"><span class="pre">enable_correct_fields_only</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">text</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flat_file_widget</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#enable_correct_fields_only"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.enable_correct_fields_only" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mantidimaging.core.operations.roi_normalisation.roi_normalisation.modes">
<span class="sig-prename descclassname"><span class="pre">mantidimaging.core.operations.roi_normalisation.roi_normalisation.</span></span><span class="sig-name descname"><span class="pre">modes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/mantidimaging/core/operations/roi_normalisation/roi_normalisation.html#modes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.modes" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">mantidimaging.core.operations.roi_normalisation.roi_normalisation module</a><ul>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter"><code class="docutils literal notranslate"><span class="pre">RoiNormalisationFilter</span></code></a><ul>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.execute_wrapper"><code class="docutils literal notranslate"><span class="pre">RoiNormalisationFilter.execute_wrapper()</span></code></a></li>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_func"><code class="docutils literal notranslate"><span class="pre">RoiNormalisationFilter.filter_func()</span></code></a></li>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.filter_name"><code class="docutils literal notranslate"><span class="pre">RoiNormalisationFilter.filter_name</span></code></a></li>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.group_name"><code class="docutils literal notranslate"><span class="pre">RoiNormalisationFilter.group_name()</span></code></a></li>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.link_histograms"><code class="docutils literal notranslate"><span class="pre">RoiNormalisationFilter.link_histograms</span></code></a></li>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.RoiNormalisationFilter.register_gui"><code class="docutils literal notranslate"><span class="pre">RoiNormalisationFilter.register_gui()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.enable_correct_fields_only"><code class="docutils literal notranslate"><span class="pre">enable_correct_fields_only()</span></code></a></li>
<li><a class="reference internal" href="#mantidimaging.core.operations.roi_normalisation.roi_normalisation.modes"><code class="docutils literal notranslate"><span class="pre">modes()</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="mantidimaging.core.operations.roi_normalisation.html"
                          title="previous chapter">mantidimaging.core.operations.roi_normalisation package</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="mantidimaging.core.operations.rotate_stack.html"
                          title="next chapter">mantidimaging.core.operations.rotate_stack package</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<div class="versions">
<h3>Versions</h3>
<ul>
  <li><a href="../../index.html">Latest</a></li>
  <li><a href="mantidimaging.core.operations.roi_normalisation.roi_normalisation.html">2.3.0</a></li>
  <li><a href="../../2.4.0/index.html">2.4.0</a></li>
  <li><a href="../../2.5.0/index.html">2.5.0</a></li>
  <li><a href="../../2.6.0/index.html">2.6.0</a></li>
  <li><a href="../../2.7.0/index.html">2.7.0</a></li>
</ul>
</div>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mantidimaging.core.operations.rotate_stack.html" title="mantidimaging.core.operations.rotate_stack package"
             >next</a> |</li>
        <li class="right" >
          <a href="mantidimaging.core.operations.roi_normalisation.html" title="mantidimaging.core.operations.roi_normalisation package"
             >previous</a> |</li>
  
        <li class="nav-item nav-item-0"><a href="../index.html">MantidImaging 2.3.0 Documentation</a> &#187;</li>
  
          <li class="nav-item nav-item-1"><a href="../api.html" >API Reference</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="mantidimaging.html" >mantidimaging package</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="mantidimaging.core.html" >mantidimaging.core package</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="mantidimaging.core.operations.html" >mantidimaging.core.operations package</a> &#187;</li>
          <li class="nav-item nav-item-5"><a href="mantidimaging.core.operations.roi_normalisation.html" >mantidimaging.core.operations.roi_normalisation package</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">mantidimaging.core.operations.roi_normalisation.roi_normalisation module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2017-2024, Mantid Project.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>